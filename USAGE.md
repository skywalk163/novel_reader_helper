# 小说阅读神器 使用指南 (v2.0)

## 概述

小说阅读神器是一款专为小说爱好者设计的多功能浏览和内容分析工具，集成了浏览器、内容提取、OCR识别和AI总结等功能。本文档详细说明如何使用各项功能。

## 快速入门

### 启动程序

```bash
# 直接启动浏览器版本（推荐）
python browser.py

# 或使用通用启动脚本
python start.py
```

## 主要功能详解

### 1. 智能浏览器功能

#### 1.1 基本导航操作
- **地址栏**：输入网址或搜索词，按回车键浏览
- **前进/后退**：点击工具栏的"← 后退"和"前进 →"按钮
- **刷新/停止**：点击"🔄 刷新"或"⏹ 停止"按钮
- **主页**：点击"🏠 主页"返回默认主页

#### 1.2 小说网站快捷访问
工具栏上提供了常用小说网站的快捷按钮：
- **起点**：访问起点中文网
- **纵横**：访问纵横中文网
- **17K**：访问17K小说网
- **读书**：访问起点读书

#### 1.3 本地文件操作
- 点击"📁 打开文件"按钮
- 选择本地HTML或MHTML文件
- 系统会智能处理和显示文件内容

### 2. 内容提取功能

#### 2.1 网页内容提取
1. 访问小说章节页面（如起点中文网的章节）
2. 等待页面完全加载
3. 点击工具栏的"?? 提取内容"按钮
4. 系统会自动识别并提取:
   - 章节标题
   - 正文内容
   - 字数统计
   - 来源信息

#### 2.2 MHTML文件提取
1. 使用"📁 打开文件"按钮打开已保存的MHTML文件
2. 系统会自动解析并显示内容
3. 点击"📄 提取内容"按钮获取纯文本内容

### 3. AI总结功能

#### 3.1 使用步骤
1. 先使用"📄 提取内容"功能提取小说内容
2. 点击工具栏的"📝 AI总结"按钮
3. 系统将自动生成内容摘要，包括:
   - 基本信息（字数、段落数）
   - 开头内容预览
   - 结尾内容预览
   - 内容特征分析
   
#### 3.2 总结结果操作
在总结窗口中，您可以:
- 点击"📋 复制总结"将内容复制到剪贴板
- 点击"?? 保存总结"将内容保存到文件
- 点击"关闭"关闭总结窗口

### 4. OCR图片识别功能

#### 4.1 OCR服务说明

**OCR服务架构**: 本项目使用独立的后台OCR服务，基于PaddleOCR引擎实现图片文字识别。

**为什么使用后台服务？**
- 分离架构：将耗资源的OCR处理与浏览器界面分离
- 灵活部署：可以在不同机器或容器中运行OCR服务
- 性能优化：避免阻塞主程序界面响应
- 可选安装：用户可以选择不安装OCR依赖，节省安装时间

#### 4.2 启动OCR服务

**前提条件**：
1. 确保您已执行完整安装：
   ```bash
   python install.py --full
   ```
   
2. 如果您之前使用了快速安装（`--quick`），需要重新执行完整安装以获得OCR功能。

**启动步骤**：

1. 打开新的终端/命令提示符窗口（独立于主程序窗口）

2. 导航到 paddleocrapp 目录：
   ```bash
   # Windows
   cd E:\comatework\paddleocrapp
   
   # Linux/macOS
   cd /path/to/novel_reader_helper/paddleocrapp
   ```

3. 启动OCR服务：
   ```bash
   # Windows
   python app.py
   
   # Linux/macOS
   python3 app.py
   ```

4. 看到类似以下输出表示启动成功：
   ```
   * Running on http://127.0.0.1:5000
   * OCR服务已启动
   ```

5. **重要**：保持此终端窗口开启，不要关闭！OCR服务需要持续运行才能在主程序中使用。

**验证服务**：
在浏览器中访问 http://127.0.0.1:5000/status，如果看到服务状态信息，说明服务正常运行。

#### 4.3 使用OCR识别功能

1. 确保OCR服务已按上述步骤启动并保持运行
2. 在主程序浏览器中访问包含图片的网页
3. 点击工具栏的"🖼️ 识别图片"按钮
4. 系统将自动:
   - 检测OCR服务是否可用
   - 下载页面中的所有图片
   - 将图片发送到OCR服务进行识别
   - 对每张图片进行OCR识别
   - 提取图片中的文字
   - 合并识别结果与网页文本

**注意事项**：
- 如果OCR服务未启动，点击"识别图片"按钮时会提示"OCR服务不可用"
- 大图片识别可能需要较长时间，请耐心等待
- 识别进度会在状态栏显示

#### 4.4 OCR服务管理

**停止服务**：
- 在OCR服务的终端窗口中按 `Ctrl+C` 即可停止服务

**重启服务**：
- 如果服务异常，可以按 `Ctrl+C` 停止后重新运行 `python app.py`

**服务端口**：
- 默认端口：5000
- 如需修改，请编辑 `paddleocrapp/app.py` 中的端口配置

## 使用技巧

### 小说阅读的最佳实践

1. **快速了解内容**
   - 打开小说章节
   - 使用"📄 提取内容"功能
   - 使用"📝 AI总结"快速了解内容梗概
   - 决定是否继续阅读完整内容

2. **批量阅读**
   - 使用浏览器依次打开多个章节
   - 分别提取和总结内容
   - 保存总结以便后续回顾

3. **处理图片版小说**
   - 确保OCR服务运行
   - 打开包含小说图片的页面
   - 使用"🖼️ 识别图片"功能
   - 查看识别结果并进行总结

### 键盘快捷键

- **Alt+←**: 后退
- **Alt+→**: 前进
- **F5**: 刷新页面
- **Esc**: 停止加载页面
- **Enter** (在地址栏): 导航到输入的网址

## 常见问题解答

### Q1: 浏览器无法启动?
**A**: 请确保已正确安装PyQt5和PyQtWebEngine:
```bash
pip install PyQt5 PyQtWebEngine
```

### Q2: 内容提取失败?
**A**: 可能原因:
- 页面未完全加载，请等待几秒再试
- 网站结构与预期不符，尝试刷新页面
- 特殊网站可能有内容保护机制

### Q3: OCR识别不工作?
**A**: 请按以下步骤检查:

1. **检查是否执行了完整安装**：
   ```bash
   # 如果之前是快速安装，需要重新执行完整安装
   python install.py --full
   ```

2. **检查OCR服务是否启动**：
   - 打开浏览器访问 http://127.0.0.1:5000/status
   - 如果无法访问，说明OCR服务未启动
   - 按照本文档"4.2 启动OCR服务"部分的步骤启动服务

3. **检查OCR服务终端**：
   - 确保启动OCR服务的终端窗口仍在运行
   - 查看终端中是否有错误信息

4. **检查端口占用**：
   ```bash
   # Windows
   netstat -ano | findstr :5000
   
   # Linux/macOS
   lsof -i :5000
   ```

5. **检查图片质量**：
   - 图片是否清晰可识别
   - 图片大小是否合适（建议 < 5MB）

### Q4: AI总结按钮不可点击?
**A**: 需要先提取内容后才能使用AI总结功能。请先点击"📄 提取内容"按钮。

### Q5: 如何提高AI总结质量?
**A**: 当前版本使用基于规则的简单总结算法。更高质量的总结将在后续版本中通过集成更先进的AI模型实现。

## 项目配置

### 配置文件
您可以通过编辑`config.py`文件自定义以下设置:
- 默认主页
- 浏览器窗口大小
- OCR服务地址
- 内容提取规则

### 安装选项与依赖

**快速安装** (`python install.py --quick`)：
- PyQt5 & PyQtWebEngine（浏览器功能）
- requests（网络请求）
- BeautifulSoup4（HTML解析）
- 基本AI总结功能

**完整安装** (`python install.py --full`)：
- 包含快速安装的所有依赖
- PaddleOCR（OCR图片识别）
- PaddlePaddle（深度学习框架）
- 其他OCR相关依赖

**推荐选择**：
- 只需要浏览和内容提取功能 → 快速安装
- 需要处理图片格式的小说 → 完整安装

## 更新日志

### v2.0 (2025-11-25)
- ✅ 添加AI总结功能
- ✅ 修复前进后退按钮功能
- ✅ 优化浏览器界面
- ✅ 改进内容提取算法
- ✅ 项目结构重组，测试代码移至独立目录

### v1.0 (2025-11-22)
- ✅ 基本浏览器功能
- ✅ 小说内容提取
- ✅ 简单OCR功能
- ✅ 初始界面设计

---

**技术支持**: 如有任何问题或建议，请查看`README.md`文件中的联系方式。

**最后更新**: 2025-11-25
